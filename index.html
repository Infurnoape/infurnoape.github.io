<!doctype html>
<html>
<head>
<meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
<meta name="application-name" content="TiddlyWiki Plugin Library" />
<meta name="application-version" content="v5.1.14" />
<meta name="copyright" content="Copyright 2017 Andrew Harrison" />
<link id="faviconLink" rel="shortcut icon" href="favicon.ico">
<title>TiddlyWiki Library for Plugins by Andrew Harrison</title>
<script>
var assetList = [
    {
        "title": "$:/plugins/ajh/copy",
        "description": "Copy Button",
        "author": "Andrew Harrison",
        "core-version": ">=5.0.0",
        "list": "readme",
        "version": "0.0.23",
        "plugin-type": "plugin",
        "dependents": "",
        "type": "application/json",
	"readme": "This plugin button can copy the transcluded contents of a tiddler to the Clipboard. It can be called by transcluding a tiddler and using the `$:/copy` template. Example usage: `{{Tiddler title to transclude||$:/copy}}`.\n\nSimply drag $:/plugins/ajh/copy to the top of your tiddlywiki display, save and reload.\n\nThis plugin comprises:\n\n* JavaScript code module\n* Icon\n* Button\n* Stylesheet\n* Caption, hint, and notification"
    },
    {
        "title": "$:/plugins/ajh/favorites",
        "description": "Favorites",
        "author": "Andrew Harrison",
	"core-version": ">=5.1.14",
        "list": "readme",
	"version": "3.0.4",
	"source": "https://github.com/infurnoape/tw5-plugins",
        "plugin-type": "plugin",
	"dependents": "",
        "type": "application/json",
	"readme": "<style>.tc-favorites {stroke:#000;stroke-width:5;fill:#ff0;} .tc-image-star-filled {height:1em;width:1em;}</style>This plugin adds the <$list filter='[<tv-config-toolbar-icons>prefix[yes]]'><span class='tc-btn-dropdown'>{{$:/core/images/star-filled}}</span></$list> <$list filter='[<tv-config-toolbar-text>prefix[yes]]'>Choose</$list> button to the View Toolbar and also the <span class='tc-favorites'>{{$:/core/images/star-filled}}</span> tab to the Sidebar. The button becomes <$list filter='[<tv-config-toolbar-icons>prefix[yes]]'><span class='tc-favorites'>{{$:/core/images/star-filled}}</span></$list> <$list filter='[<tv-config-toolbar-text>prefix[yes]]'>Favorite</$list> when selected and then the tiddler appears in the list on the <span class='tc-favorites'>{{$:/core/images/star-filled}}</span> tab.  The list can be sorted using drag and drop. To drag an item, select it, then hold down the mouse or track-pad button while you drag it to a new location in the list. Release the button to drop the item into place. Unneeded favorites can be removed from the list by using the <$list filter='[<tv-config-toolbar-icons>prefix[yes]]'><span class='tc-favorites'>{{$:/core/images/star-filled}}</span></$list> <$list filter='[<tv-config-toolbar-text>prefix[yes]]'>favorite</$list> button in the tiddler.\n\nSimply drag $:/plugins/ajh/favorites to the top of your tiddlywiki display, save and reload.\n\nThis plugin comprises:\n\n* Icon\n* Template\n* Stylesheet\n* Sidebar tab\n* Caption and hint"
    },
    {
        "title": "$:/plugins/ajh/locations",
        "description": "Locations Button",
        "author": "Andrew",
        "core-version": ">=5.1.11",
	"list": "readme",
        "version": "0.0.2",
	"source": "https://github.com/infurnoape/tw5-plugins",
        "plugin-type": "plugin",
        "dependents": "",
        "type": "application/json",
	"readme": "This plugin adds the <span class='tc-btn-dropdown'>{{$:/plugins/ajh/locations/image}}</span>locations button to the Page Toolbar. The button will navigate to the Locations tiddler.\n\nThis plugin comprises:\n\n* Icon\n* Template\n* Caption and hint"
    },
    {
        "title": "$:/plugins/ajh/openall",
        "description": "Open All Button",
        "author": "Andrew",
        "core-version": ">=5.1.11",
	"list": "readme",
        "version": "0.0.2",
	"source": "https://github.com/infurnoape/tw5-plugins",
        "plugin-type": "plugin",
	"dependents": "",
        "type": "application/json",
	"readme": "This plugin adds the {{$:/plugins/ajh/openall/template}} button to the tag manager drop down menu using the{{$:/tags/TagDropdown||$:/core/ui/TagTemplate}}system tag. The open all button opens all non system tiddlers tagged with that drop down tag.\n\nSimply drag $:/plugins/ajh/openall to the top of your tiddlywiki display, save and reload.\n\nThis plugin comprises:\n\n* Icon\n* Template\n* Stylesheet\n* Caption and hint"
    },
    {
        "title": "$:/plugins/ajh/randombackground",
        "description": "Random Background",
        "author": "Andrew",
        "core-version": ">=5.1.11",
        "list": "readme",
        "version": "0.1.2",
	"source": "https://github.com/infurnoape/tw5-plugins",
        "plugin-type": "plugin",
	"dependents": "",
        "type": "application/json",
	"readme": "This plugin replaces the page background image with a random one upon each refresh. Name the background tiddlers ~$:/plugins/ajh/randombackground/background# where # is a whole number between 0 and what is in ~$:/info/max-random. For example: ~$:/plugins/ajh/randombackground/background0, ~$:/plugins/ajh/randombackground/background1, ~$:/plugins/ajh/randombackground/background2, etc.\n\nAdd the ''attachment'' field with value of ''fixed'' or ''scroll'' and/or the ''size'' field with value of ''auto'', ''cover'', or ''contain'' for each background individually and it will supersede the global setting for that background.\n\nThis plugin comprises:\n\n* JavaScript code module\n* Stylesheet\n* Default background"
    },
    {
        "title": "$:/plugins/ajh/reduce",
        "description": "Reduce Button",
        "author": "Andrew",
        "core-version": ">=5.1.12",
	"list": "readme",
        "version": "0.0.2",
	"source": "https://github.com/infurnoape/tw5-plugins",
        "plugin-type": "plugin",
        "dependents": "",
        "type": "application/json",
	"readme": "This plugin adds the <span class=\"tc-btn-dropdown\">{{$:/plugins/ajh/reduce/image}}</span>reduce button to the Editor Toolbar. The button will reduce text in the text field into a blob with duplicate words and spaces removed. When used with an external image or page like with ''_canonical_uri'' field, the text from the external page can be made to seem fully searchable within the wiki while conserving file size.\n\nThis plugin comprises:\n\n* JavaScript code module\n* Keyboard shortcut\n* Icon\n* Template\n* Caption and hint"
    },
    {
        "title": "$:/plugins/ajh/showfields",
        "description": "Show Fields",
        "author": "Andrew",
        "core-version": ">=5.1.14",
        "list": "readme",
	"version": "0.0.1",
	"source": "https://github.com/infurnoape/tw5-plugins",
        "plugin-type": "plugin",
	"dependents": "",
        "type": "application/json",
	"readme": "This plugin adds to the settings tab in the control panel. It provides a field selector to add or remove fields to be viewed if any tiddler has them. Drag and drop selected to change the ordering.\n\nAlso, optionally add to a tiddler the field named ''show-field'' and in its contents add field names with or without a minus in front to show or hide them in that tiddler only.\n\nThis plugin comprises:\n\n* Control settings\n* Template\n* Caption and hint"
    },
    {
        "title": "$:/plugins/ajh/tiddlycopy",
        "description": "Tiddly Link Copy Button",
        "author": "Andrew",
        "core-version": ">=5.1.11",
        "list": "readme",
	"version": "0.0.31",
	"source": "https://github.com/infurnoape/tw5-plugins",
        "plugin-type": "plugin",
	"dependents": "",
        "type": "application/json",
	"readme": "This plugins adds the <span class='tc-btn-dropdown'>{{$:/plugins/ajh/copy/images}}</span> copy button to the ''View Toolbar'' tab in the control panel. The copy button copies to the clipboard the title as a link if the path is defined in a ''tiddly'' field. By adding a ''tiddly'' field and path to an external page, it recognizes to display the page in an object frame and the copy button displays beside the title or gets listed on the more actions menu if it isn't selected on the View Toolbar.\n\n<mark>@@color:red; ''WARNING'' @@</mark>: Use of Tiddly Viewer to display untrusted web sites could be a security risk.\n\nThis plugin requires the [[Tiddly Viewer|http://tiddlyviewer.tiddlyspot.com]] and [[Copy|http://copy.tiddlyspot.com]] plugins.\n\nThis plugin comprises:\n\n* Templates\n* Stylesheet"
    },
    {
        "title": "$:/plugins/ajh/tiddlytime",
        "description": "Tiddlytime Button",
        "author": "Andrew",
        "core-version": ">=5.1.11",
        "list": "readme",
	"version": "0.0.9",
	"source": "https://github.com/infurnoape/tw5-plugins",
        "plugin-type": "plugin",
	"dependents": "",
        "type": "application/json",
	"readme": "This plugin button displays time with seconds and several time spans when clicked. The tool tip displays todays date minus 78 days. Clicking the time reveals time, time + 15 minutes, time + 30 minutes, and time + 45 minutes.\n\nSimply drag $:/plugins/ajh/tiddlytime to the top of your tiddlywiki display, save and reload.\n\nThis plugin comprises:\n\n* JavaScript code modules\n* Button\n* Template\n* Stylesheet\n* Timestamp\n* Caption and hint"
    },
    {
        "title": "$:/plugins/ajh/tiddlyviewer",
        "description": "Tiddly Viewer",
        "author": "Andrew",
        "core-version": ">=5.1.11",
        "list": "readme",
	"version": "0.0.15",
	"source": "https://github.com/infurnoape/tw5-plugins",
        "plugin-type": "plugin",
        "dependents": "",
        "type": "application/json",
	"readme": "This plugin displays external pages fully formatted instead of as just plain text. By adding a ''tiddly'' field and path to an external page, it recognizes to display the page in an object frame.\n\n<mark>@@color:red; ''WARNING'' @@</mark>: Use of Tiddly Viewer to display untrusted web sites could be a security risk.\n\nThis plugin comprises:\n\n* Template\n* Stylesheet"
    },
    {
        "title": "$:/plugins/ajh/toplefttoolbar",
        "description": "Top Left Toolbar",
        "author": "Andrew",
        "core-version": ">=5.1.14",
        "list": "readme",
	"version": "0.0.12",
	"source": "https://github.com/infurnoape/tw5-plugins",
        "plugin-type": "plugin",
        "dependents": "",
        "type": "application/json",
	"readme": "This plugin adds the Top Left Toolbar to the Toolbars tab in the control panel. Drag and drop selected to change the ordering. It provides a list of buttons that have the $:/tags/PageControls tag and can be selected to appear in the Top left toolbar.<br>\n\nSimply drag $:/plugins/ajh/toplefttoolbar to the top of your tiddlywiki display, save and reload.\n\nThis plugin comprises:\n\n* Control settings\n* Template\n* Stylesheet\n* Toolbar\n* Caption and hint"
    }
];

/*\
title: $:/plugins/tiddlywiki/pluginlibrary/libraryserver.js
type: application/javascript
module-type: library

A simple HTTP-over-window.postMessage implementation of a standard TiddlyWeb-compatible server. It uses real HTTP to load the individual tiddler JSON files.

\*/
(function(){

/*jslint node: true, browser: true */
/*global $tw: false */
"use strict";

// Listen for window messages
window.addEventListener("message",function listener(event){
	console.log("plugin library: Received message from",event.origin);
	console.log("plugin library: Message content",event.data);
	switch(event.data.verb) {
		case "GET":
			if(event.data.url === "recipes/library/tiddlers.json") {
				// Route for recipes/library/tiddlers.json
				event.source.postMessage({
					verb: "GET-RESPONSE",
					status: "200",
					cookies: event.data.cookies,
					url: event.data.url,
					type: "application/json",
					body: JSON.stringify(assetList,null,4)
				},"*");
			} else if(event.data.url.indexOf("recipes/library/tiddlers/") === 0) {
				var url = "recipes/library/tiddlers/" + encodeURIComponent(removePrefix(event.data.url,"recipes/library/tiddlers/"));
				// Route for recipes/library/tiddlers/<uri-encoded-tiddler-title>.json
				httpGet(url,function(err,responseText) {
					if(err) {
						event.source.postMessage({
							verb: "GET-RESPONSE",
							status: "404",
							cookies: event.data.cookies,
							url: event.data.url,
							type: "text/plain",
							body: "Not found"
						},"*");
					} else {
						event.source.postMessage({
							verb: "GET-RESPONSE",
							status: "200",
							cookies: event.data.cookies,
							url: event.data.url,
							type: "application/json",
							body: responseText
						},"*");
					}
				});
			} else {
				event.source.postMessage({
					verb: "GET-RESPONSE",
					status: "404",
					cookies: event.data.cookies,
					url: event.data.url,
					type: "text/plain",
					body: "Not found"
				},"*");
			}
			break;
	}
},false);

// Helper to remove string prefixes
function removePrefix(string,prefix) {
	if(string.indexOf(prefix) === 0) {
		return string.substr(prefix.length);
	} else {
		return string;
	}
}

// Helper for HTTP GET
function httpGet(url,callback) {
	var http = new XMLHttpRequest();
	http.open("GET",url,true);
	http.onreadystatechange = function() {
		if(http.readyState == 4 && http.status == 200) {
			callback(null,http.responseText);
		}
	};
	http.send();
}

})();

</script>
</head>
<body><h1>Hello Visitor</h1><p>This is the library for <a href="https://github.com/Infurnoape/infurnoape.github.io.git" target="_blank">plugins/ajh</a>. It is not intended to be opened directly in the browser.</p><p>See <a href="http://t5a.tiddlyspot.com/#Plugin%20Library" target="_blank">t5a.tiddlyspot.com/Plugin Library</a> for details of how to install plugins.</p></body>
</html>

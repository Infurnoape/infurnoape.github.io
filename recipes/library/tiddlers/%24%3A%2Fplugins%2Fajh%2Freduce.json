{
    "title": "$:/plugins/ajh/reduce",
    "type": "application/json",
    "author": "Andrew",
    "core-version": ">=5.1.12",
    "dependents": "$:/config/ShortcutInfo/reduce $:/config/shortcuts/reduce $:/language/reduce/caption $:/language/reduce/hint $:/plugins/ajh/reduce/icon $:/plugins/ajh/reduce/image $:/plugins/ajh/reduce/macro.js $:/plugins/ajh/reduce/readme $:/plugins/ajh/reduce/template",
    "description": "Reduce Button",
    "list": "readme",
    "plugin-type": "plugin",
    "source": "https://github.com/Infurnoape/infurnoape.github.io/blob/master/recipes/library/tiddlers/%2524%253A%252Fplugins%252Fajh%252Freduce.json",
    "version": "0.0.2",
    "text": "{\n    \"tiddlers\": {\n        \"$:/plugins/ajh/reduce/icon\": {\n            \"text\": \"\\\\define my-svg()\\n<svg class='tc-image-reduce tc-image-button' width='22pt' height='22pt' viewBox='0 0 192 192'><path fill='#f00' stroke='#090' stroke-width='7.5' d='m13.5,52.2l82.5,-48l82.5,48v87.3l-82.5,48l-82.5,-48v-87.3z'/><path fill='#fff' stroke='#000' stroke-width='2' d='m$(m)$$(path)$'/></g></svg>\\n\\\\end\\n\\n<$vars m='53,152' path={{$:/plugins/ajh/reduce/image!!path}}>\\n<<my-svg>>\\n</$vars>\",\n            \"title\": \"$:/plugins/ajh/reduce/icon\"\n        },\n        \"$:/plugins/ajh/reduce/image\": {\n            \"text\": \"\\\\define my-svg()\\n<svg class='tc-image-reduce tc-image-button' width='22pt' height='22pt' viewBox='0 0 128 128'><path d='m$(m)$$(path)$'/></svg>\\n\\\\end\\n\\n<$vars m='36.3,126' path={{!!path}}>\\n<<my-svg>>\\n</$vars>\",\n            \"title\": \"$:/plugins/ajh/reduce/image\",\n            \"tags\": \"$:/tags/Image\",\n            \"path\": \"c-6.5,-1.8 -11.2,-7.1 -13.2,-14.6c-1.3,-5.2 -2.9,-19.7 -2.9,-27c0,-8 1.9,-27.6 3.1,-31.5c1.6,-5.4 5.3,-9.8 10.1,-12.2c4.4,-2.2 4.7,-2.2 18,-1.2c13.9,1 15.5,1.1 16.1,0.4c0.2,-0.3 1,-0.6 1.6,-0.7c0.7,-0.1 1.2,-0.4 1.2,-0.5c0,-0.2 0.4,-0.5 0.9,-0.7l0.9,-0.4v-22.8l-1.2,-1.4c-0.7,-0.8 -1.2,-1.6 -1.2,-1.9c0,-0.5 -1.7,-0.5 -12.7,-0.5c-9.4,0 -12.8,-0.1 -13.2,-0.4c-0.6,-0.6 -0.6,-5 0,-5.5c0.3,-0.3 3.7,-0.4 13.2,-0.4c11.3,0 12.7,-0.1 12.7,-0.6c0,-0.3 0.5,-1 1,-1.6c1,-1 1.1,-1 4.8,-1c3.7,0 3.8,0 4.8,1c0.6,0.6 1,1.3 1,1.6c0,0.5 1.4,0.6 12.7,0.6c9.4,0 12.8,0.1 13.2,0.4c0.6,0.6 0.6,5 0,5.5c-0.3,0.3 -3.7,0.4 -13.2,0.4c-11,0 -12.7,0.1 -12.7,0.5c0,0.3 -0.5,1.1 -1.1,1.7l-1.1,1.2v24.6h2.5c1.9,0 2.5,0.1 2.7,0.6c0.4,1 0.2,15.4 -0.1,16.2c-0.3,0.6 -0.8,0.7 -2.7,0.7h-2.3v7.8c0,6 -0.1,7.9 -0.5,8.6c-0.3,0.5 -0.5,1.5 -0.5,2.2c0,1.1 0.1,1.3 0.7,1.3c1,0 2.2,2.6 2.2,4.9c0,1.9 0.5,2.6 2.1,2.6c1.2,0 1.9,1.2 1.7,2.6l-0.2,1.3h-17l-0.2,-1.2c-0.2,-1.4 0.5,-2.7 1.7,-2.7c1.5,0 2.1,-0.7 2.1,-2.2c0,-1.6 1.1,-4.9 1.7,-5.2c0.5,-0.2 0.5,-2.4 0,-3.4c-0.3,-0.5 -0.5,-3.2 -0.6,-8.1c-0.2,-7.1 -0.2,-7.3 -1,-7.6c-0.5,-0.2 -0.8,-0.5 -0.8,-0.6c0,-0.2 -0.3,-0.3 -0.6,-0.3c-0.4,0 -1.4,-0.4 -2.2,-0.8c-1.5,-0.7 -2,-0.7 -11.6,-0.7c-9.7,0.1 -10,0.1 -11.6,1c-0.9,0.5 -2.1,1.4 -2.6,2.1c-1.9,2.5 -2,2.9 -2,24.9c0,22.6 0,22 2.5,24.1c2.6,2.2 3.3,2.4 10.3,2.4c7.5,0 8.9,-0.4 10.6,-2.9c0.7,-1.1 1.1,-1.4 1.8,-1.2c0.5,0.1 1.4,0 2,-0.2c0.7,-0.3 1.4,-0.2 2.4,0.1c1.1,0.4 1.5,0.4 1.8,0.1c0.6,-0.6 1.5,-0.5 2.1,0.1c0.5,0.6 2.1,0.7 2.1,0.2c0,-0.6 1.7,-0.8 2.9,-0.4c0.8,0.4 1.2,0.4 1.5,0c0.5,-0.5 2.5,-0.5 3,0c0.3,0.3 0.6,0.3 1.3,-0.1c1.6,-0.8 2,-0.3 1.9,2.4c-0.1,2.6 0.2,2.3 -3.9,3.5c-2.5,0.7 -3.6,1.7 -6.2,6.1c-2.8,4.7 -5.3,6.4 -10.8,7.2c-5.3,0.8 -16.2,1.8 -21.4,2c-4.3,0.1 -5.9,0.1 -7.4,-0.4z\"\n        },\n        \"$:/plugins/ajh/reduce/readme\": {\n            \"text\": \"This plugin adds the <span class=\\\"tc-btn-dropdown\\\">{{$:/plugins/ajh/reduce/image}}</span>reduce button to the Editor Toolbar. The button will reduce text in the text field into a blob with duplicate words and spaces removed. When used with an external image or page like with ''_canonical_uri'' field, the text from the external page can be made to seem fully searchable within the wiki while conserving file size.\\n\\nSimply drag $:/plugins/ajh/reduce to the top of your tiddlywiki display, save and reload.\\n\\nThis plugin comprises:\\n\\n* JavaScript code module\\n* Keyboard shortcut\\n* Icon\\n* Template\\n* Caption and hint\",\n            \"title\": \"$:/plugins/ajh/reduce/readme\"\n        },\n        \"$:/plugins/ajh/reduce/template\": {\n            \"text\": \"<$action-sendmessage\\n\\t$message='tm-edit-text-operation'\\n\\t$param='reduce-all'\\n/>\",\n            \"title\": \"$:/plugins/ajh/reduce/template\",\n            \"tags\": \"$:/tags/EditorToolbar\",\n            \"shortcuts\": \"((reduce))\",\n            \"list-before\": \"$:/core/ui/EditorToolbar/more\",\n            \"icon\": \"$:/plugins/ajh/reduce/image\",\n            \"description\": \"{{$:/language/reduce/hint}}\",\n            \"condition\": \"[<targetTiddler>!is[image]]\",\n            \"caption\": \"{{$:/language/reduce/caption}}\"\n        },\n        \"$:/plugins/ajh/reduce/macro.js\": {\n            \"text\": \"/*\\\\\\ntitle: $:/plugins/ajh/reduce/macro.js\\ntype: application/javascript\\nmodule-type: texteditoroperation\\n\\nText editor operation to replace the entire text\\n\\n\\\\*/\\n(function(){\\n\\n/*jslint node: true, browser: true */\\n/*global $tw: false */\\n'use strict';\\n\\nexports['reduce-all'] = function(event,operation) {\\n    operation.cutStart = 0;\\n    operation.cutEnd = operation.text.length;\\n    var zwrds = operation.text.toLowerCase().replace(\\t/\\\\W/g,' ');\\n    var ztrc = zwrds.split(' ').sort().reverse();\\n    var zntrc = ' ';\\n    var add = '';\\n    for (var i = 0; i < ztrc.length; i++) {\\n        if (zntrc.indexOf(ztrc[i]) < 1) {\\n            add = ztrc[i].toString();\\n            zntrc += add;\\n        }\\n    }\\n    var t= zntrc.slice(1);\\n    operation.replacement = zntrc.slice(1);\\n    operation.newSelStart = 0;\\n    operation.newSelEnd = operation.replacement.length;\\n};\\n\\n})();\",\n            \"type\": \"application/javascript\",\n            \"title\": \"$:/plugins/ajh/reduce/macro.js\",\n            \"module-type\": \"texteditoroperation\"\n        },\n        \"$:/language/reduce/caption\": {\n            \"text\": \"reduce\",\n            \"title\": \"$:/language/reduce/caption\"\n        },\n        \"$:/language/reduce/hint\": {\n            \"text\": \"Reduce text into a blob\",\n            \"title\": \"$:/language/reduce/hint\"\n        },\n        \"$:/config/shortcuts/reduce\": {\n            \"text\": \"ctrl-shift-R\",\n            \"title\": \"$:/config/shortcuts/reduce\"\n        },\n        \"$:/config/ShortcutInfo/reduce\": {\n            \"text\": \"{{$:/language/reduce/hint}}\",\n            \"title\": \"$:/config/ShortcutInfo/reduce\"\n        }\n    }\n}"
}
